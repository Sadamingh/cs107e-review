
bootloader.o:     file format elf32-littlearm


Disassembly of section .text:

00000000 <wait_for_byte>:
   0:	push	{r3, r4, r5, lr}
   4:	bl	0 <timer_get_ticks>
   8:	ldr	r4, [pc, #56]	; 48 <wait_for_byte+0x48>
   c:	mov	r5, r0
  10:	b	24 <wait_for_byte+0x24>
  14:	bl	0 <timer_get_ticks>
  18:	rsb	r0, r5, r0
  1c:	cmp	r0, r4
  20:	bhi	3c <wait_for_byte+0x3c>
  24:	bl	0 <uart_haschar>
  28:	cmp	r0, #0
  2c:	beq	14 <wait_for_byte+0x14>
  30:	bl	0 <uart_getchar>
  34:	pop	{r3, r4, r5, lr}
  38:	bx	lr
  3c:	mvn	r0, #0
  40:	pop	{r3, r4, r5, lr}
  44:	bx	lr
  48:	.word	0x0000c34f

0000004c <bootloader_main>:
  4c:	push	{r7, lr}
  50:	bl	0 <uart_init>
  54:	mov	r0, #500	; 0x1f4
  58:	bl	0 <timer_delay_ms>
  5c:	bl	0 <uart_haschar>
  60:	cmp	r0, #0
  64:	bne	90 <bootloader_main+0x44>
  68:	mov	r4, #4
  6c:	mov	r0, #47	; 0x2f
  70:	bl	0 <pi_led_toggle>
  74:	mov	r0, #75	; 0x4b
  78:	bl	0 <timer_delay_ms>
  7c:	subs	r4, r4, #1
  80:	bne	6c <bootloader_main+0x20>
  84:	mov	r0, #21
  88:	bl	0 <uart_putchar>
  8c:	b	54 <bootloader_main+0x8>
  90:	mov	r0, #47	; 0x2f
  94:	bl	0 <pi_led_on>
  98:	mov	r7, #32768	; 0x8000
  9c:	mov	r5, #0
  a0:	mov	r8, #1
  a4:	b	bc <bootloader_main+0x70>
  a8:	mov	r0, #21
  ac:	add	r5, r5, #1
  b0:	bl	0 <uart_putchar>
  b4:	cmp	r5, #4
  b8:	bgt	54 <bootloader_main+0x8>
  bc:	bl	0 <wait_for_byte>
  c0:	and	r0, r0, #255	; 0xff
  c4:	cmp	r0, #4
  c8:	beq	14c <bootloader_main+0x100>
  cc:	cmp	r0, #1
  d0:	bne	a8 <bootloader_main+0x5c>
  d4:	bl	0 <wait_for_byte>
  d8:	cmp	r0, r8
  dc:	bne	a8 <bootloader_main+0x5c>
  e0:	bl	0 <wait_for_byte>
  e4:	rsb	r3, r8, #255	; 0xff
  e8:	cmp	r0, r3
  ec:	bne	a8 <bootloader_main+0x5c>
  f0:	mov	r4, #0
  f4:	mov	r6, r4
  f8:	bl	0 <wait_for_byte>
  fc:	and	r0, r0, #255	; 0xff
 100:	strb	r0, [r7, r4]
 104:	add	r4, r4, #1
 108:	add	r6, r6, r0
 10c:	cmp	r4, #128	; 0x80
 110:	and	r6, r6, #255	; 0xff
 114:	bne	f8 <bootloader_main+0xac>
 118:	bl	0 <wait_for_byte>
 11c:	cmp	r0, r6
 120:	bne	a8 <bootloader_main+0x5c>
 124:	mov	r0, #6
 128:	bl	0 <uart_putchar>
 12c:	bl	0 <wait_for_byte>
 130:	and	r0, r0, #255	; 0xff
 134:	add	r8, r8, #1
 138:	cmp	r0, #4
 13c:	add	r7, r7, #128	; 0x80
 140:	and	r8, r8, #255	; 0xff
 144:	mov	r5, #0
 148:	bne	cc <bootloader_main+0x80>
 14c:	mov	r0, #47	; 0x2f
 150:	bl	0 <pi_led_off>
 154:	mov	r0, #6
 158:	bl	0 <uart_putchar>
 15c:	mov	r0, #500	; 0x1f4
 160:	bl	0 <timer_delay_ms>
 164:	mov	r0, #32768	; 0x8000
 168:	bl	0 <BRANCHTO>
 16c:	b	54 <bootloader_main+0x8>
